{
	"name": "Settings",
	"events": [
		{
			"eventType": "include",
			"includeSheet": "Global"
		},
		{
			"eventType": "comment",
			"text": "navigation"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-clicked",
					"objectClass": "Back",
					"sid": 976564064202083
				}
			],
			"actions": [
				{
					"id": "go-to-layout",
					"objectClass": "System",
					"sid": 496481574930214,
					"parameters": {
						"layout": "Main"
					}
				}
			],
			"sid": 350493642242608
		},
		{
			"eventType": "comment",
			"text": "UI load"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-start-of-layout",
					"objectClass": "System",
					"sid": 399637728182749
				}
			],
			"actions": [],
			"sid": 439922555064937,
			"children": [
				{
					"eventType": "variable",
					"name": "username",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": false,
					"isConstant": false,
					"sid": 587709671748940
				},
				{
					"eventType": "block",
					"conditions": [],
					"actions": [
						{
							"callFunction": "ListUsers",
							"sid": 877839445841937
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 755284945567159
						},
						{
							"id": "parse",
							"objectClass": "JSON",
							"sid": 921414909260201,
							"parameters": {
								"data": "\"{}\""
							}
						},
						{
							"id": "set-json",
							"objectClass": "JSON",
							"sid": 726122397405705,
							"parameters": {
								"path": "\"users\"",
								"json": "APISuccess"
							}
						}
					],
					"sid": 931997406946580,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "for-each",
									"objectClass": "JSON",
									"sid": 677016981530583,
									"parameters": {
										"path": "\"users\""
									}
								}
							],
							"actions": [],
							"sid": 447671483454170,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-value",
											"objectClass": "JSON",
											"sid": 818364606937613,
											"parameters": {
												"path": "\"users.\" & JSON.CurrentKey & \".UID\"",
												"cmp": 0,
												"value": "CurrentUserUID"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 717936941268052,
											"parameters": {
												"variable": "username",
												"value": "JSON.Get(\"users.\" & JSON.CurrentKey & \".name\")"
											}
										},
										{
											"id": "stop-loop",
											"objectClass": "System",
											"sid": 188610952636527
										}
									],
									"sid": 170192216043939
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "SettingsUser",
									"sid": 837697463809601,
									"parameters": {
										"text": "username"
									}
								},
								{
									"id": "set-text",
									"objectClass": "SettingsPass",
									"sid": 994304760021903,
									"parameters": {
										"text": "CurrentPassword"
									}
								}
							],
							"sid": 165271864529996
						}
					]
				}
			]
		},
		{
			"eventType": "comment",
			"text": "change"
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-clicked",
					"objectClass": "SettingsUserBtn",
					"sid": 326113783603183
				}
			],
			"actions": [],
			"sid": 984216761297864,
			"children": [
				{
					"eventType": "variable",
					"name": "newusername",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 449847300010265
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 936386494496657,
							"parameters": {
								"first-value": "trim(SettingsUser.Text)",
								"comparison": 0,
								"second-value": "CurrentUserUID"
							}
						}
					],
					"actions": [],
					"sid": 371228601826431
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 690741307103038
						},
						{
							"id": "compare-two-values",
							"objectClass": "System",
							"sid": 817930072979013,
							"parameters": {
								"first-value": "trim(SettingsUser.Text)",
								"comparison": 0,
								"second-value": "\"\""
							}
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "Message",
							"sid": 859697876080737,
							"parameters": {
								"text": "\"[color=#ff0000]\" & TextManager.Translate(\"settings.user-error1\") & \"[/color]\""
							}
						}
					],
					"sid": 728402302741510
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 595878285564321
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 784230626678857,
							"parameters": {
								"variable": "newusername",
								"value": "trim(SettingsUser.Text)"
							}
						},
						{
							"callFunction": "SetUsername",
							"sid": 375662446376604,
							"parameters": [
								"CurrentUserUID",
								"CurrentPassword",
								"newusername"
							]
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 139286057806015
						}
					],
					"sid": 515985229096735,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 343705339004889,
									"parameters": {
										"variable": "APIError",
										"comparison": 1,
										"value": "\"\""
									}
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "Message",
									"sid": 753155733526001,
									"parameters": {
										"text": "\"[color=#ff0000]\" & TextManager.Translate(\"settings.user-error2\") & \"[/color]\""
									}
								}
							],
							"sid": 240330379253550
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "else",
									"objectClass": "System",
									"sid": 152031649249291
								}
							],
							"actions": [
								{
									"id": "set-text",
									"objectClass": "Message",
									"sid": 390661609879633,
									"parameters": {
										"text": "\"[color=#00ff00]\" & TextManager.Translate(\"settings.user-success\") & \"[/color]\""
									}
								}
							],
							"sid": 948536918966671
						}
					]
				}
			]
		},
		{
			"eventType": "block",
			"conditions": [
				{
					"id": "on-clicked",
					"objectClass": "SettingsPassBtn",
					"sid": 484891732133525
				}
			],
			"actions": [],
			"sid": 152981189999208,
			"children": [
				{
					"eventType": "variable",
					"name": "newpass",
					"type": "string",
					"initialValue": "",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 735824960012112
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-text",
							"objectClass": "SettingsPass",
							"sid": 687073104586466,
							"parameters": {
								"text": "SettingsPass2.Text",
								"case": "case-sensitive"
							},
							"isInverted": true
						}
					],
					"actions": [
						{
							"id": "set-text",
							"objectClass": "Message",
							"sid": 959500605910551,
							"parameters": {
								"text": "\"[color=#ff0000]\" & TextManager.Translate(\"settings.pass-error\") & \"[/color]\""
							}
						}
					],
					"sid": 506602937668210
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "else",
							"objectClass": "System",
							"sid": 596785849280031
						}
					],
					"actions": [
						{
							"id": "set-eventvar-value",
							"objectClass": "System",
							"sid": 148693414927716,
							"parameters": {
								"variable": "newpass",
								"value": "SettingsPass.Text"
							}
						},
						{
							"callFunction": "SetPassword",
							"sid": 983762029523447,
							"parameters": [
								"CurrentUserUID",
								"CurrentPassword",
								"SettingsPass.Text"
							]
						},
						{
							"id": "wait-for-previous-actions",
							"objectClass": "System",
							"sid": 684330488799513
						}
					],
					"sid": 332585760147680,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "compare-eventvar",
									"objectClass": "System",
									"sid": 786697754074700,
									"parameters": {
										"variable": "APIError",
										"comparison": 0,
										"value": "\"\""
									}
								}
							],
							"actions": [
								{
									"id": "set-eventvar-value",
									"objectClass": "System",
									"sid": 511021569639025,
									"parameters": {
										"variable": "CurrentPassword",
										"value": "newpass"
									}
								},
								{
									"id": "set-text",
									"objectClass": "Message",
									"sid": 804423315122438,
									"parameters": {
										"text": "\"[color=#00ff00]\" & TextManager.Translate(\"settings.pass-success\") & \"[/color]\""
									}
								}
							],
							"sid": 872603485895261
						}
					]
				}
			]
		}
	],
	"sid": 222502315915217
}